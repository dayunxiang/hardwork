<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="lib/font-awesome-4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="lib/Swiper-3.4.2/dist/css/swiper.min.css">
    <link rel="stylesheet" href="lib/Swiper-3.4.2/dist/css/animate.min.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <!-- header -->
    <div class="header"></div>
    <!-- Swiper -->
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <!-- 系统功能简介 -->
            <div class="swiper-slide" style="background-color: #EBEEF1;">
                <div class="xitongjianjie">
                    <div class="intro">
                        <div class="title clearfix">
                            <h3 class="fl-l">系统功能简介</h3>
                        </div>
                        <div class="intromain"></div>
                    </div>
                    <div class="weather">
                        <div class="title clearfix">
                            <h3 class="fl-l">天气预报</h3>
                        </div>
                        <div class="weathermain clearfix">
                            <div class="weatherInfo clearfix">
                                <ul>
                                    <li> 
                                        <span>星期一</span>
                                        <span>今天</span>
                                        <span>15:30</span>
                                    </li>
                                    <li>
                                        <span class="fl-l">北京市</span>
                                        <img src="img/duoyun.png" alt="" class="fl-r">
                                    </li>
                                </ul>
                            </div>
                            <div class="weatherBab clearfix">
                                <ul class="changeBar clearfix">
                                    <li class="active">今天</li>
                                    <li>7天</li>
                                </ul>
                                <div class="changeContent clearfix">
                                    <ul>
                                        <li class="changeContentSub">
                                            <ul class="clearfix">
                                                <li class="clearfix">
                                                    <span>30</span>
                                                    <span>℃</span>  
                                                </li>
                                                <li class="clearfix">
                                                    <div>
                                                        <img src="img/up.png" alt="">
                                                        <i>31</i>
                                                    </div>
                                                    <div>
                                                         <img src="img/down.png" alt="">
                                                        <i>22</i>
                                                    </div>
                                                </li>
                                                <li class="kqzl">
                                                    空气质量:48优
                                                </li>
                                                <li>
                                                    <img src="img/feng.png" alt="">
                                                    <i>南风2级</i>
                                                </li>
                                                <li>
                                                    <img src="img/shidu.png" alt="">
                                                    <i>相对湿度51%</i>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="changeContentSub" style="display: none;">
                                            <ul>
                                                <li class="clearfix">
                                                    <span class="fl-l" style="margin-right: 70px;">星期二</span>
                                                    <img src="img/duoyun.png" alt="" class="fl-l" >
                                                    <span class="fl-r" style="margin-left: 25px; color: rgba(255,255,255,0.50);">10℃</span>
                                                    <span class="fl-r" >30℃</span>
                                                </li>
                                                 <li class="clearfix">
                                                    <span class="fl-l" style="margin-right: 70px;">星期二</span>
                                                    <img src="img/duoyun.png" alt="" class="fl-l" >
                                                    <span class="fl-r" style="margin-left: 25px; color: rgba(255,255,255,0.50);">10℃</span>
                                                    <span class="fl-r" >30℃</span>
                                                </li>
                                                 <li class="clearfix">
                                                    <span class="fl-l" style="margin-right: 70px;">星期二</span>
                                                    <img src="img/duoyun.png" alt="" class="fl-l" >
                                                    <span class="fl-r" style="margin-left: 25px; color: rgba(255,255,255,0.50);">10℃</span>
                                                    <span class="fl-r" >30℃</span>
                                                </li>
                                                 <li class="clearfix">
                                                    <span class="fl-l" style="margin-right: 70px;">星期二</span>
                                                    <img src="img/duoyun.png" alt="" class="fl-l" >
                                                    <span class="fl-r" style="margin-left: 25px; color: rgba(255,255,255,0.50);">10℃</span>
                                                    <span class="fl-r" >30℃</span>
                                                </li>
                                                 <li class="clearfix">
                                                    <span class="fl-l" style="margin-right: 70px;">星期二</span>
                                                    <img src="img/duoyun.png" alt="" class="fl-l" >
                                                    <span class="fl-r" style="margin-left: 25px; color: rgba(255,255,255,0.50);">10℃</span>
                                                    <span class="fl-r" >30℃</span>
                                                </li>
                                                 <li class="clearfix">
                                                    <span class="fl-l" style="margin-right: 70px;">星期二</span>
                                                    <img src="img/duoyun.png" alt="" class="fl-l" >
                                                    <span class="fl-r" style="margin-left: 25px; color: rgba(255,255,255,0.50);">10℃</span>
                                                    <span class="fl-r" >30℃</span>
                                                </li>
                                                 <li class="clearfix">
                                                    <span class="fl-l" style="margin-right: 70px;">星期二</span>
                                                    <img src="img/duoyun.png" alt="" class="fl-l" >
                                                    <span class="fl-r" style="margin-left: 25px; color: rgba(255,255,255,0.50);">10℃</span>
                                                    <span class="fl-r" >30℃</span>
                                                </li>

                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 汛情/警情统计 -->
            <div class="swiper-slide" style="background-color: #EBEEF1;">
                <div class="xunjingqingtongji">
                    <div class="title">
                        <h3>汛情/警情统计</h3>
                    </div>
                    <div class="main clearfix">
                        <div class="xunqing">
                            <div class="title">
                                <h4>防汛人员统计</h4>
                            </div>
                            <div id="xunqing"></div>
                        </div>
                        <div class="jingqing">
                            <div class="title">
                                <h4>主要防汛物资统计</h4>
                            </div>
                            <div id="jingqing"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 人员物资统计 -->
            <div class="swiper-slide" style="background-color: #EBEEF1;">
                <div class="wuzitongji">
                    <div class="title">
                        <h3>人员物资统计</h3>
                    </div>
                    <div class="main clearfix">
                        <div class="fxren">
                            <div class="title">
                                <h4>防汛人员统计</h4>
                            </div>
                            <div id="fxren"></div>
                        </div>
                        <div class="fxwu">
                            <div class="title">
                                <h4>主要防汛物资统计</h4>
                            </div>
                            <div id="fxwu"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 内涝风险分布图 -->
            <div class="swiper-slide " id="fengxianmap">
                <div class="fengxiancard ani" swiper-animate-effect="fadeInLeftBig" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s">
                    <div class="title">
                        <h3>内涝风险分布图</h3>
                    </div>
                    <div class="main">
                        <div class="countcontent clearfix">
                            <ul class="clearfix">
                                <li class="clearfix">
                                    <span>五级</span>
                                    <span>8个</span>
                                </li>
                                <li>
                                    <span>四级</span>
                                    <span>16个</span>
                                </li>
                                <li>
                                    <span>三级</span>
                                    <span>24个</span>
                                </li>
                                <li>
                                    <span>二级</span>
                                    <span>32个</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 历史整改分布点 -->
            <div class="swiper-slide" id="zhenggaimap">
                <div class="zhenggaicard ani" swiper-animate-effect="fadeInLeftBig" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s">
                    <div class="title">
                        <h3>历史整改点分布图</h3>
                    </div>
                    <div class="main">
                        <div class="timeOption clearfix">
                            <ul class="clearfix">
                                <li class="clearfix">
                                    <p>
                                        <span style="color: #4167AD;">2013</span>年至今共<span style="color:#325BA7; font-size:20px; ">76个</span>易涝点
                                    </p>
                                </li>
                            </ul>
                        </div>
                        <div class="countcontent clearfix">
                            <ul class="clearfix">
                                <li class="clearfix">
                                    <span>五级</span>
                                    <span>8个</span>
                                </li>
                                <li>
                                    <span>四级</span>
                                    <span>16个</span>
                                </li>
                                <li>
                                    <span>三级</span>
                                    <span>24个</span>
                                </li>
                                <li>
                                    <span>二级</span>
                                    <span>32个</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 历史易涝分布点  -->
            <div class="swiper-slide" id="yilaomap">
                <div class="yilaocard ani" swiper-animate-effect="fadeInLeftBig" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s">
                    <div class="title">
                        <h3>历史易涝点分布图</h3>
                    </div>
                    <div class="main">
                        <div class="timeOption clearfix">
                            <ul class="clearfix">
                                <li class="clearfix">
                                    <p>
                                        <span style="color: #4167AD;">2013</span>年至今共<span style="color:#325BA7; font-size:20px; ">150个</span>易涝点
                                    </p>
                                </li>
                            </ul>
                        </div>
                        <div class="countcontent clearfix">
                            <ul class="clearfix">
                                <li class="clearfix">
                                    <span>五级</span>
                                    <span>8个</span>
                                </li>
                                <li>
                                    <span>四级</span>
                                    <span>16个</span>
                                </li>
                                <li>
                                    <span>三级</span>
                                    <span>24个</span>
                                </li>
                                <li>
                                    <span>二级</span>
                                    <span>32个</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 指挥调度 -->
            <div class="swiper-slide" id="zhihuimap">
                <div class="zhihuicard ani" swiper-animate-effect="fadeInLeftBig" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s">
                    <div class="title">
                        <h3>指挥调度图</h3>
                    </div>
                    <div class="main">
                        <div class="timeOption clearfix">
                            <ul class="clearfix">
                                <li class="clearfix">
                                    <span>警情点</span>
                                    <span>15个</span>
                                </li>
                                <li>
                                    <span>2017年2号汛情(天坛)</span>
                                    <span>红色预警</span>
                                </li>
                            </ul>
                        </div>
                        <div class="countcontent clearfix">
                            <ul class="clearfix">
                                <li class="clearfix">
                                    <span>布防点</span>
                                    <span>3个</span>
                                </li>
                                <li>
                                    <span>防汛队</span>
                                    <span>9个</span>
                                </li>
                                <li>
                                    <span>液位计</span>
                                    <span>5个</span>
                                </li>
                                <li>
                                    <span>流量计</span>
                                    <span>8个</span>
                                </li>
                                <li>
                                    <span>雨量计</span>
                                    <span>6个</span>
                                </li>
                                <li>
                                    <span>视频监控点</span>
                                    <span>10个</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 清淤整改 -->
            <div class="swiper-slide map" id="qingyumap">
                <div class="qingyucard ani" swiper-animate-effect="fadeInLeftBig" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s">
                    <div class="title">
                        <h3>清淤整改统计</h3>
                    </div>
                    <div class="main">
                        <div class="timeOption clearfix">
                            <span>年份:</span>
                            <div class="select clearfix">
                                <span class="fl-l">2017</span>
                                <i class="fa fa-caret-down fl-r"></i>
                            </div>
                            <ul class="selectOption">
                                <li>2017</li>
                                <li>2016</li>
                                <li>2015</li>
                                <li>2014</li>
                            </ul>
                        </div>
                        <div class="countcontent clearfix">
                            <ul class="clearfix">
                                <li class="clearfix">
                                    <span>泵站清淤(立方米)</span>
                                    <span>5678</span>
                                </li>
                                <li>
                                    <span>路段清疏(米)</span>
                                    <span>5678</span>
                                </li>
                                <li>
                                    <span>排水设施检查(处)</span>
                                    <span>5678</span>
                                </li>
                                <li>
                                    <span>易涝点整改(处)</span>
                                    <span>5678</span>
                                </li>
                            </ul>
                        </div>
                        <ul class="bottom clearfix">
                            <li class="clearfix" >
                                <img src="img/jingqing.png" alt="" class="fl-l" style="vertical-align: middle;">
                                <span tyle="vertical-align: middle;" class="fl-l">警情点</span>
                            </li>
                            <li class="clearfix" >
                                <img src="img/xunqing.png" alt="" class="fl-l" tyle="vertical-align: middle;">
                                <span tyle="vertical-align: middle;" class="fl-l">汛情点</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">Slide 8</div>
            <div class="swiper-slide">Slide 9</div>
            <div class="swiper-slide">Slide 10</div>
        </div>
        <!-- Add Pagination -->
        <div class="swiper-pagination"></div>
    </div>
    <script src="./node_modules/jquery/dist/jquery.js"></script>
    <script src="../fangxun/lib/ZhiShuiMap/webapps/ZhiShuiMap/MapAPI/RMap/rmap.js"></script>
    <script src="lib/Swiper-3.4.2/dist/js/swiper.jquery.min.js"></script>
    <script src="lib/Swiper-3.4.2/dist/js/swiper.animate1.0.2.min.js"></script>
    <script src="lib/echarts.min (2).js"></script>
    <script src="js/index.js"></script>
    <script>
    $(function() {
        //初始化地图，默认地图为在线高德地图
        initMap()
        //select
        select()
        //swiper
        var swiper = new Swiper('.swiper-container', {
            pagination: '.swiper-pagination',
            paginationClickable: true,
            mousewheelControl: true,
            direction: 'vertical',
            // loop: true,
            onInit: function(swiper) { //Swiper2.x的初始化是onFirstInit
                swiperAnimateCache(swiper); //隐藏动画元素 
                swiperAnimate(swiper); //初始化完成开始动画
            },
            onSlideChangeEnd: function(swiper) {
                swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
            }
        });
        //防汛人员环状图
        fxren()
        //防汛物资环状图
        fxwu()
        //xunqing
        xunqing()
        //jingqing
        jingqing()
    })
    //初始化地图，默认地图为在线高德地图
    function initMap() {
        //初始化地图，默认地图为在线高德地图
        var qingyumap = new RMap.Map('qingyumap');
        var zhihuimap = new RMap.Map('zhihuimap');
        var yilaomap = new RMap.Map('yilaomap');
        var zhenggaimap = new RMap.Map('zhenggaimap');
        var fengxianmap = new RMap.Map('fengxianmap');
        //以116.390985, 39.906358（天安门广场）为中心点坐标，地图缩放到12级
        qingyumap.centerZoom(116.390985, 39.906358, 12);
        zhihuimap.centerZoom(116.390985, 39.906358, 12);
        yilaomap.centerZoom(116.390985, 39.906358, 12);
        zhenggaimap.centerZoom(116.390985, 39.906358, 12);
        fengxianmap.centerZoom(116.390985, 39.906358, 12);
    }
    //select
    function select() {
        $(".select").on("click", function() {
            $(".selectOption").css("display", 'block')
            stopBubble("e")

        })
        $(".selectOption li").on("click", function() {
            $(".select").find('span').text($(this).text())
            $(".selectOption").css("display", 'none')
            stopBubble("e")
        })

    }
    //阻止事件冒泡的通用函数
    function stopBubble(e) {
        // 如果传入了事件对象，那么就是非ie浏览器
        if (e && e.stopPropagation) {
            //因此它支持W3C的stopPropagation()方法
            e.stopPropagation();
        } else {
            //否则我们使用ie的方法来取消事件冒泡
            window.event.cancelBubble = true;
        }
    }

    //防汛人员环状图
    function fxren() {
        var myChart = echarts.init(document.getElementById('fxren'));
        var option = {
            color: ['rgba(67,136,236,1)', 'rgba(181,83,217,1)', 'rgba(255,192,41,1)', 'rgba(255,143,0,1)', 'rgba(0,211,116,1)'],

            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b}: {c} ({d}%)"
            },

            series: [{
                name: '防汛人员统计',
                type: 'pie',
                radius: ['35%', '65%'],
                itemStyle: {
                    normal: {
                        label: {
                            show: true,
                            textStyle: { fontSize: "18" },
                            formatter: function(val) { //让series 中的文字进行换行
                                return val.name + ": " + val.value;
                            }
                        },
                        title: {
                            text: '防汛人员统计'
                        },
                        labelLine: {
                            show: true,

                        }
                    },
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,

                    }
                },
                data: [

                    { value: 48, name: '定点定片人员' },
                    { value: 3, name: '系统操作人员' },
                    { value: 42, name: '泵站工作人员' },
                    { value: 11, name: '指挥调度人员' },

                    { value: 162, name: '抢险队伍' },

                ]
            }],
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }
    //防汛物资环状图
    function fxwu() {
        var myChart = echarts.init(document.getElementById('fxwu'));
        var option = {
            color: ['rgba(105,125,201,1)', 'rgba(249,179,72,1)', 'rgba(176,224,126,1)', 'rgba(225,108,77,1)', 'rgba(30,195,146,1)'],

            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b}: {c} ({d}%)"
            },

            series: [{
                name: '防汛人员统计',
                type: 'pie',
                radius: ['35%', '65%'],
                itemStyle: {
                    normal: {
                        label: {
                            show: true,
                            textStyle: { fontSize: "18" },
                            formatter: function(val) { //让series 中的文字进行换行
                                return val.name + ": " + val.value;
                            }
                        },
                        title: {
                            text: '防汛人员统计'
                        },
                        labelLine: {
                            show: true,

                        }
                    },
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,

                    }
                },
                data: [

                    { value: 2, name: '运输车' },
                    { value: 3, name: '工具车' },
                    { value: 2, name: '挖掘机' },
                    { value: 2, name: '30kw发电机' },

                    { value: 5, name: '防汛抢险车' },

                ]
            }],
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }

    function xunqing() {
        var myChart = echarts.init(document.getElementById('xunqing'));
        var option = {
            color: ['rgba(255,79,45,1)', 'rgba(245,166,35,1)', 'rgba(245,209,35,1)', 'rgba(30,144,228,1)'],
            tooltip: {
                trigger: 'axis',
                axisPointer: { // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            legend: {
                data: ['红色预警', '橙色预警', '黄色预警', '蓝色预警']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'value'
            },
            yAxis: {
                type: 'category',
                data: ['2013', '2014', '2015', '2016', '2017']
            },
            series: [{
                    name: '红色预警',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: [320, 302, 301, 334, 390]
                },
                {
                    name: '橙色预警',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: [120, 132, 101, 134, 90]
                },
                {
                    name: '黄色预警',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: [220, 182, 191, 234, 290]
                },
                {
                    name: '蓝色预警',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: [150, 212, 201, 154, 190]
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }

    function jingqing() {
        var myChart = echarts.init(document.getElementById('jingqing'));
        var option = {
            color: ['rgba(255,79,45,1)', 'rgba(245,166,35,1)', 'rgba(245,209,35,1)', 'rgba(30,144,228,1)'],
            tooltip: {
                trigger: 'axis',
                axisPointer: { // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            legend: {
                data: ['红色预警', '橙色预警', '黄色预警', '蓝色预警']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'value'
            },
            yAxis: {
                type: 'category',
                data: ['2013', '2014', '2015', '2016', '2017']
            },
            series: [{
                    name: '红色预警',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: [320, 302, 301, 334, 390]
                },
                {
                    name: '橙色预警',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: [120, 132, 101, 134, 90]
                },
                {
                    name: '黄色预警',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: [220, 182, 191, 234, 290]
                },
                {
                    name: '蓝色预警',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: [150, 212, 201, 154, 190]
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }
       //tab

        function tabcount(eleid, activeclass, subareatabcontent) {
            $(eleid + ' li').click(function() {
                var index = $(this).index();
                $(this).addClass(activeclass);
                $(this).siblings('li').removeClass(activeclass)
                $(subareatabcontent).eq(index).show().siblings(subareatabcontent).hide();
            })
        }
         tabcount(".changeBar", 'active', '.changeContentSub')
    </script>
</body>

</html>
